AWSTemplateFormatVersion: "2010-09-09"
Transform: AWS::Serverless-2016-10-31
Description: >
  #TODO

Parameters:
  ParentStack:
    Type: String
    Description: Parent stack this template was launched from, used for naming SSM parameters

Resources:
  RdbmsConfigTable:
    Type: AWS::DynamoDB::Table
    DeletionPolicy: Retain
    Properties:
      AttributeDefinitions:
        - AttributeName: identifier
          AttributeType: S
        - AttributeName: config
          AttributeType: S
      BillingMode: PAY_PER_REQUEST
      KeySchema:
        - AttributeName: identifier
          KeyType: HASH
        - AttributeName: config
          KeyType: RANGE
      SSESpecification:
        SSEEnabled: TRUE

  RdbmsConfigParameter:
    Type: AWS::SSM::Parameter
    Properties:
      Description: DynamoDB table for RDBMS table configs
      Name: !Sub '/${ParentStack}/dynamodb/rdbms'
      Type: String
      Value: !Ref RdbmsConfigTable
